---
import Button from "./Button.astro";

export interface Props {
  name: string;
  description: string;
  ctaPrimary: { text: string; href: string };
  ctaSecondary: { text: string; href: string };
}

const { name, description, ctaPrimary, ctaSecondary } = Astro.props;
---

<section
  class="relative bg-gradient-to-br from-slate-900 via-teal-900 to-slate-900 text-white overflow-hidden min-h-[600px]"
>
  <div id="particles-container" class="absolute inset-0 pointer-events-none">
  </div>
  <div
    class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 lg:py-32 z-10"
  >
    <div class="text-center">
      <h1
        class="text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-white to-teal-200 bg-clip-text text-transparent"
      >
        {name}
      </h1>
      <p
        class="text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto leading-relaxed"
      >
        {description}
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <Button variant="hero" href={ctaPrimary.href}>
          {ctaPrimary.text}
        </Button>
        <Button
          variant="hero-secondary"
          href={ctaSecondary.href}
          target="_blank"
        >
          {ctaSecondary.text}
        </Button>
      </div>
    </div>
  </div>
  <!-- Decorative elements -->
  <div
    class="absolute top-20 left-10 w-20 h-20 bg-teal-500/20 rounded-full blur-xl"
  >
  </div>
  <div
    class="absolute bottom-20 right-10 w-32 h-32 bg-cyan-500/20 rounded-full blur-xl"
  >
  </div>
</section>

<style>
  #particles-container {
    position: absolute !important;
    width: 100% !important;
    height: 100% !important;
    top: 0 !important;
    left: 0 !important;
  }

  #particles-container canvas {
    position: absolute !important;
    width: 100% !important;
    height: 100% !important;
    top: 0 !important;
    left: 0 !important;
  }
</style>

<script>
  import { tsParticles } from "@tsparticles/engine";
  import { loadSlim } from "@tsparticles/slim";

  const initParticles = async () => {
    const container = document.getElementById("particles-container");
    if (!container) return;

    // Limpiar instancia previa si existe
    const existingInstance = tsParticles.domItem(0);
    if (existingInstance) {
      await existingInstance.destroy();
    }

    await loadSlim(tsParticles);

    await tsParticles.load({
      id: "particles-container",
      options: {
        background: {
          opacity: 0,
        },
        fullScreen: {
          enable: false,
        },
        fpsLimit: 60,
        particles: {
          color: {
            value: ["#14b8a6", "#5eead4", "#2dd4bf"],
          },
          links: {
            color: "#14b8a6",
            distance: 160,
            enable: true,
            opacity: 0.3,
            width: 1,
          },
          move: {
            enable: true,
            speed: 1,
            direction: "none",
            random: true,
            straight: false,
            outModes: {
              default: "bounce",
            },
          },
          number: {
            density: {
              enable: true,
            },
            value: 85,
          },
          opacity: {
            value: { min: 0.3, max: 0.6 },
            animation: {
              enable: true,
              speed: 0.8,
              minimumValue: 0.2,
            },
          },
          shape: {
            type: "circle",
          },
          size: {
            value: { min: 1.5, max: 3 },
          },
        },
        detectRetina: true,
      },
    });
  };

  // Inicializar en carga de página
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initParticles);
  } else {
    initParticles();
  }

  // Reinicializar después de navegación SPA
  document.addEventListener("astro:page-load", initParticles);
</script>
